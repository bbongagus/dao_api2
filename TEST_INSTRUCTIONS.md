# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Optimistic UI Backend

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å –≤ Redis:
```bash
docker exec -it optimistic-redis-clean redis-cli GET graph:main
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É REST API:
```bash
curl http://localhost:3001/api/graphs/main
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Graphy frontend:
```bash
cd graphy
npm run dev
```

### 2. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:5173
```

### 3. –¢–µ—Å—Ç—ã:

#### –¢–µ—Å—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏–∑ Redis

#### –¢–µ—Å—Ç 2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
1. –û—Ç–∫—Ä—ã—Ç—å –≤—Ç–æ—Ä—É—é –≤–∫–ª–∞–¥–∫—É —Å —Ç–µ–º –∂–µ URL
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–¥—É –≤ –ø–µ—Ä–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Ç–æ—Ä–æ–π –≤–∫–ª–∞–¥–∫–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

#### –¢–µ—Å—Ç 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis
1. –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–¥ –∏ —Å–≤—è–∑–µ–π
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis: `docker exec -it optimistic-redis-clean redis-cli GET graph:main`
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –Ω–æ–¥—ã –µ—Å—Ç—å –≤ JSON

#### –¢–µ—Å—Ç 4: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
1. –°–æ–∑–¥–∞—Ç—å –≥—Ä–∞—Ñ —Å –Ω–æ–¥–∞–º–∏
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend: `docker-compose restart backend`
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ì—Ä–∞—Ñ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### Backend –ª–æ–≥–∏:
```bash
docker logs optimistic-backend-clean -f
```

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏—Å–∫–∞—Ç—å:
- `‚úÖ WebSocket connected`
- `üìä TreeDaoStore: Loading initial graph state`
- `üì§ Operation sent via WebSocket`
- `üîÑ Remote operation received`

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω (—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ Redis –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±–µ –≤–∫–ª–∞–¥–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ WebSocket
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ `Operation broadcasted to X clients`

## –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö

### –û—á–∏—Å—Ç–∏—Ç—å Redis:
```bash
docker exec -it optimistic-redis-clean redis-cli DEL graph:main
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ:
```bash
cd dao_api2
docker-compose down
docker-compose up -d